{{ define "main" -}}

<!-- Initialize a variable as Scratch, used in social and system requirements -->
{{- $scratch := newScratch }}

<!-- Tell Hugo whether in 'System Requirements' Minimum or Recomended or Optimal data fields are present -->
<!-- We want the whole Minimum column to exist even if one specification has Minimum specification stated in data file. Same goes for recommended and optimal. -->
{{- $recommended := false -}}
{{- $optimal := false -}}
{{- $minimum := false -}}
{{/*- if .Params.sysreq -}}
  {{- range .Params.sysreq -}}
    {{- if .min -}}
      {{- $minimum = true -}}
    {{- end -}}
    {{- if .recm -}}
      {{- $recommended = true -}}
    {{- end -}}
    {{- if .optm -}}
      {{- $optimal = true -}}
    {{- end -}}
    {{/*- if minimum and recommended and optimal all are true then break -*/}}
  {{/*- end -}}
{{- end */}}

<!-- using printf to concatenate strings -->
{{- $no_content := printf "%s%s%s" "Not available, but <a href='/contribute/'>we appreciate help!</a> You can help us <a href='https://gitlab.com/Softorage/softorage.gitlab.io/blob/master/content/" .File.Path "'>improve this page</a>." -}}
<!-- -->
<div class="container-fluid main-gradient-light text-clr2 pb-3 pt-4 position-relative shadow-sm">
  <div style="height:4rem;"></div>
  <div class="mobile-only" style="height:2.5rem;"></div>
  <div class="row px-2">
    <div class="col-md-8">
      <div class="row">
        <!-- Defining $rating_stars as a global variable -->
        {{- $rating_stars := 0 }}
        {{- if .Params.image -}}
          <div class="align-middle px-auto col-auto">
            <img class="bg-nav rounded shadow-sm p-2" style="height:5rem;" src="{{ .Params.image }}" alt="{{ .Title }} logo">  
            <br>
            {{- if .Params.rating }}
              {{- $len := len .Params.rating }} <!-- length of loop -->
              {{- range $index, $rt := .Params.rating }}
                {{- $rating_stars = add $rating_stars (div (mul (index $rt.rate 0) 1.0) (index $rt.rate 1)) -}} <!-- if one is float then only is the result a float -->
              {{- end }}
              {{- $rating_stars = div $rating_stars $len }}
              
              <div class="rating-stars mt-2" style="--rating: {{ $rating_stars }};" aria-label="Rating: {{ lang.NumFmt 2 (mul $rating_stars 5) }} out of 5"></div>
              
            {{- end -}}
          </div>
        {{- end -}}
        
        <!-- Title and Description -->
        <div class="col">
          <h1 class="display-4 tg" style="overflow-x: auto;">{{ replace (replace .Title "(" "<span class='small' style='font-weight: 300; font-size: 1.2rem;'>") ")" "</span>" | safeHTML }}</h1>
          {{- if .Params.description -}}
            <p class="small" style="color: #8e0090;/*#fc4aff*/">{{ .Params.description }}</p>
          {{- end -}}
          
          {{ if not .Params.image }}
            {{- if .Params.rating }}
              {{ $len := len .Params.rating }} <!-- length of loop -->
              {{- range $index, $rt := .Params.rating -}}
                {{ $rating_stars = add $rating_stars (div (mul (index $rt.rate 0) 1.0) (index $rt.rate 1)) -}} <!-- if one is float then only is the result a float -->
              {{ end }}
              {{ $rating_stars = div $rating_stars $len }}
              
              <div class="rating-stars" style="--rating: {{ $rating_stars }};" aria-label="Rating: {{ lang.NumFmt 2 (mul $rating_stars 5) }} out of 5"></div>
              
            {{ end }}
          {{ end }}
          
        </div>
      </div>
      
      <!-- As we don't check whether page.status is true, `status` is shown `unknown` when page.status is false. -->
      {{- if in .Params.status "Active" -}}
        <!-- in case of source, as first condition in if statement, we have checked if source is not a text-type(as src.first exists only if it is a text-type source), that is, it is a webpage, because it is more frequent condition -->
        <a role="button" class="btn btn-sm bg-nav my-2" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="Active" data-html="true" data-content="
          {{/* 
            Here, the code iterates through a range, hence even if there is only one value of source for status, it has to be in square brackes([]) in the front matter, so that it is treated as an array. This is to ensure that a source from a book would not be mistaken by our code as two sources from web.
            Example,
            ["txt"] => one source from web
            ["txt1","txt2"] => two sources from web
            [["txt1","txt2"]] => one source from (say) book, txt1 being link, and txt2 being the text to be hyperlinked.
          */}}
          {{- if .Params.source.status }}
            {{- range $index, $element := .Params.source.status }}
              {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
            {{- end }}
          {{- else -}}
            {{ $no_content | safeHTMLAttr }}
          {{- end -}}
        "><span class="small text-success">Status | {{ site.Data.icons.checkmark | safeHTML }}</span></a>
      {{- else if in .Params.status "Discontinued" -}}
        <a role="button" class="btn btn-sm bg-nav my-2" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="Discontinued" data-html="true" data-content="
          {{- if .Params.source.status }}
            {{- range $index, $element := .Params.source.status }}
              {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
            {{- end }}
          {{- else -}}
            {{ $no_content | safeHTMLAttr }}
          {{- end -}}
        "><span class="small text-danger">Status | {{ site.Data.icons.ban | safeHTML }}</span></a>
      {{- else -}}
        <a role="button" class="btn btn-sm bg-nav my-2" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="Unknown" data-html="true" data-content="
          {{- if .Params.source.status }}
            {{- range $index, $element := .Params.source.status }}
              {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
            {{- end }}
          {{- else -}}
            {{ $no_content | safeHTMLAttr }}
          {{- end -}}
        "><span class="small text-warning">Status | {{ site.Data.icons.question | safeHTML }}</span></a>
      {{- end -}}
    </div>
    
    <div class="col-md-4">
    
      {{- if .Params.get_it }}
        {{/* since a user expects uniformity in interface, it is decided to keep only modal view, and discard the practise of directing user to 'download website' upon clicking the 'download/get it' button.
        {{- if eq (len .Params.get_it) 1 -}} <!-- if there is just one download link, we assume that it is authentic link and from official website -->
          <a href="{{ (index .Params.get_it 0).url }}" class="btn btn-success my-2"><span class="text-nav">{{ site.Data.icons.download | safeHTML }}</span>&nbsp; <span class="text-nav">Get it</span></a>
        {{- else -}}
        */}}
          <button class="btn btn-download btn-hover my-2" data-toggle="modal" data-target="#get-it-modal"><span class="text-nav">{{ site.Data.icons.download | safeHTML }}</span>&nbsp; <span class="text-nav">{{ if in .Params.categories "Framework" }}Get it{{ else }}Download{{ end }}</span></button>
          
          <!-- Modal -->
          <div class="modal fade" id="get-it-modal" tabindex="-1" role="dialog" aria-labelledby="get-it-modal-label" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
              <div class="modal-content bg-nav text-antinav shadow">
                <div class="modal-header">
                  <h2 class="modal-title h5" id="get-it-modal-label">{{ if in .Params.categories "Framework" }}Get {{ .Title }}{{ else }}Download {{ .Title }}{{ end }}</h2>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span class="text-antinav" aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body get-it-modal-body">
                  <!-- we have enabled tabbable tabs for following -->
                  <ul class="nav nav-tabs rounded-lg shadow-sm justify-content-center" role="tablist">
                    <li class="nav-item" data-toggle="tooltip" data-trigger="hover" data-placement="top" title="Downloads usually distributed directly by software developer, ensuring safety and integrity of software">
                      <a class="nav-link active text-success" data-toggle="tab" href="#download-authentic" role="tab" aria-controls="authentic" aria-selected="true">Recommended</a>
                    </li>
                    
                    <li class="nav-item" data-toggle="tooltip" data-trigger="hover" data-placement="top" title="Third-party downloads for 'Desktop Operating Systems'">
                      <a class="nav-link text-clr2" data-toggle="tab" href="#download-dskp" role="tab" aria-label="Third-party downloads for 'Desktop Operating Systems'" aria-controls="desktop" aria-selected="false">{{ site.Data.icons.desktop | safeHTML }}</a>
                    </li>
                    
                    <li class="nav-item" data-toggle="tooltip" data-trigger="hover" data-placement="top" title="Third-party downloads for 'Mobile Operating Systems'">
                      <a class="nav-link text-clr2" data-toggle="tab" href="#download-smptb" role="tab" aria-label="Third-party downloads for 'Mobile Operating Systems'" aria-controls="smartphone/tab" aria-selected="false">{{ site.Data.icons.mobile | safeHTML }} / {{ site.Data.icons.tab | safeHTML }}</a>
                    </li>
                  </ul>
                  
                  <!-- index of last iteration (subtracted 1 since they start from zero) -->
                  {{ $download_len := sub (len .Params.get_it) 1 }}
                  <!-- stores availability of download link for given platform -->
                  {{ $download_available := false }}
                  
                  <div class="tab-content" id="get_it_tab_content">
                    <div class="tab-pane fade show active text-center" id="download-authentic" role="tabpanel" aria-labelledby="authentic-tab">
                      {{- range .Params.get_it -}}
                        {{ if (in .from "Authentic") | or (in .from "Google Play") | or (in .from "Apple App") }}
                          <a href="{{ .url }}" rel="noopener noreferrer nofollow" class="btn btn{{ if eq .from "Authentic" }} bg-success-light text-success{{ else }}-sm btn-primary{{ end }} m-2"
                          {{- if .platform }} data-toggle="tooltip" data-placement="top" title="
                          
                          {{- range $index, $platform := .platform -}}
                          
                          {{- if $index -}}, {{ end -}} {{- $platform.name -}}
                          
                          {{- end -}}
                          
                          
                          {{/* index (index .platform 0) "name" */}}" {{- end -}}
                          >{{ if eq .from "Authentic" }}Official download{{ else }}{{ replace .from " | Authentic" "" }}{{ end }}</a>&nbsp;
                        {{ end }}
                      {{ end -}}
                    </div>
                    
                    <div class="tab-pane fade" id="download-dskp" role="tabpanel" aria-labelledby="desktop-tab">
                      <div class="row my-2">
                        <div class="col-3">
                          <ul class="nav nav-pills flex-column" role="tablist" aria-orientation="vertical">
                            <li class="nav-item">
                              <a class="nav-link active text-clr2" data-toggle="tab" href="#download-dskp-windows" role="tab" aria-controls="windows" aria-selected="true">Windows</a>
                            </li>
                            <li class="nav-item">
                              <a class="nav-link text-clr2" data-toggle="tab" href="#download-dskp-linux" role="tab" aria-controls="linux" aria-selected="false">Linux</a>
                            </li>
                            <li class="nav-item">
                              <a class="nav-link text-clr2" data-toggle="tab" href="#download-dskp-macOS" role="tab" aria-controls="macOS" aria-selected="false">macOS</a>
                            </li>
                            <li class="nav-item">
                              <a class="nav-link text-clr2" data-toggle="tab" href="#download-dskp-other" role="tab" aria-controls="other" aria-selected="false">Other</a>
                            </li>
                          </ul>
                        </div>
                        {{ $platform_download_not_available := "No download available for " }}
                        <div class="col-9">
                          <div class="tab-content">
                            <div class="tab-pane fade show active" id="download-dskp-windows" role="tabpanel" aria-labelledby="windows-tab">
                              {{- range $index, $download_item := sort .Params.get_it "from" -}} 
                                {{ if $download_item.platform }}
                                  {{ range $download_item.platform }}
                                    {{ if in .hardware "dskp" | and (eq .name "Windows") | and (not (in $download_item.from "Authentic")) }}
                                      <a href="{{ $download_item.url }}" rel="noopener noreferrer nofollow"
                                      {{- if or (not .official) (.remarks) }} data-toggle="tooltip" data-placement="top" title="
                                        {{- if .remarks }}{{ .remarks }} {{ end }}
                                        {{- if and (not .official) (.remarks) }}, {{ end }}
                                        {{- if not .official }}
                                          {{- $download_item.from }} | {{- if .arch }} {{ delimit .arch "/" }} {{- end }} Windows Unofficial Version
                                        {{- end }}"
                                      {{- end }} class="btn btn-sm btn-light text-primary m-2">{{ $download_item.from }} {{- if .arch }} {{ delimit .arch "/" }} {{- end }}</a>
                                      {{ $download_available = true }}
                                    {{ end }}
                                  {{ end }}
                                {{ end }}
                                {{ if and (eq $index $download_len) (not $download_available) }} <!-- means to run only if above 'if statement' does not run, current iteration is last in the range loop and $download_available is set to false. -->
                                  <p class="m-2 text-muted">No download available for Windows.
                                  <br>
                                  <span class="small">If you know about a URL that provides a download, you can help us by <a href="https://gitlab.com/Softorage/softorage.gitlab.io/issues">opening an issue</a> and selecting layout 'Download URL Suggestion'.</span>
                                  </p>
                                {{ else if and (eq $index $download_len) $download_available }}
                                  {{ $download_available = false }} <!-- resetting the variable '$download_available' -->
                                {{ end }}
                              {{ end -}}
                            </div>
                            <div class="tab-pane fade" id="download-dskp-linux" role="tabpanel" aria-labelledby="linux-tab">
                              {{- range $index, $download_item := sort .Params.get_it "from" -}} 
                                {{ if $download_item.platform }}
                                  {{ range $download_item.platform }}
                                    {{ if in .hardware "dskp" | and (eq .name "Linux") | and (not (in $download_item.from "Authentic")) }}
                                      <a href="{{ $download_item.url }}" rel="noopener noreferrer nofollow"
                                      {{- if or (not .official) (.remarks) }} data-toggle="tooltip" data-placement="top" title="
                                        {{- if .remarks }}{{ .remarks }} {{ end }}
                                        {{- if and (not .official) (.remarks) }}, {{ end }}
                                        {{- if not .official }}
                                          {{- $download_item.from }} | {{- if .arch }} {{ delimit .arch "/" }} {{- end }} Linux Unofficial Version
                                        {{- end }}"
                                      {{- end }} class="btn btn-sm btn-light text-primary m-2">{{ $download_item.from }} {{- if .arch }} {{ delimit .arch "/" }} {{- end }}</a> 
                                      {{ $download_available = true }}
                                    {{ end }}
                                  {{ end }}
                                {{ end }}
                                {{ if and (eq $index $download_len) (not $download_available) }} <!-- means to run only if above 'if statement' does not run, current iteration is last in the range loop and $download_available is set to false. -->
                                  <p class="m-2 text-muted">No download available for Linux.
                                  <br>
                                  <span class="small">If you know about a URL that provides a download, you can help us by <a href="https://gitlab.com/Softorage/softorage.gitlab.io/issues">opening an issue</a> and selecting layout 'Download URL Suggestion'.</span>
                                  </p>
                                {{ else if and (eq $index $download_len) $download_available }}
                                  {{ $download_available = false }} <!-- resetting the variable '$download_available' -->
                                {{ end }}
                              {{ end -}}
                            </div>
                            <div class="tab-pane fade" id="download-dskp-macOS" role="tabpanel" aria-labelledby="macOS-tab">
                              {{- range $index, $download_item := sort .Params.get_it "from" -}} 
                                {{ if $download_item.platform }}
                                  {{ range $download_item.platform }}
                                    {{ if in .hardware "dskp" | and (eq .name "macOS") | and (not (in $download_item.from "Authentic")) }}
                                      <a href="{{ $download_item.url }}" rel="noopener noreferrer nofollow"
                                      {{- if or (not .official) (.remarks) }} data-toggle="tooltip" data-placement="top" title="
                                        {{- if .remarks }}{{ .remarks }} {{ end }}
                                        {{- if and (not .official) (.remarks) }}, {{ end }}
                                        {{- if not .official }}
                                          {{- $download_item.from }} | {{- if .arch }} {{ delimit .arch "/" }} {{- end }} macOS Unofficial Version
                                        {{- end }}"
                                      {{- end }} class="btn btn-sm btn-light text-primary m-2">{{ $download_item.from }} {{- if .arch }} {{ delimit .arch "/" }} {{- end }}</a> 
                                      {{ $download_available = true }}
                                    {{ end }}
                                  {{ end }}
                                {{ end }}
                                {{ if (eq $index $download_len) | and (not $download_available) }} <!-- means to run only if above 'if statement' does not run, current iteration is last in the range loop and $download_available is set to false. -->
                                  <p class="m-2 text-muted">No download available for macOS.
                                  <br>
                                  <span class="small">If you know about a URL that provides a download, you can help us by <a href="https://gitlab.com/Softorage/softorage.gitlab.io/issues">opening an issue</a> and selecting layout 'Download URL Suggestion'.</span>
                                  </p>
                                {{ else if (eq $index $download_len) | and $download_available }}
                                  {{ $download_available = false }} <!-- resetting the variable '$download_available' -->
                                {{ end }}
                              {{ end -}}
                            </div>
                            <div class="tab-pane fade" id="download-dskp-other" role="tabpanel" aria-labelledby="other-tab">
                              {{- range $index, $download_item := sort .Params.get_it "from" -}} 
                                <!-- if the item has platform field -->
                                {{ if $download_item.platform }}
                                  {{ range $download_item.platform }}
                                    {{ if in .hardware "dskp" | and (not ((eq .name "macOS") | or (eq .name "Linux") | or (eq .name "Windows") | or (in $download_item.from "Authentic"))) }}
                                    {{/* {{ if not (or (or (or (eq .name "macOS") (eq .name "Linux")) (eq .name "Windows")) (in $download_item.from "Authentic")) }} */}}
                                      <a href="{{ $download_item.url }}" rel="noopener noreferrer nofollow" class="btn btn-sm btn-light text-primary m-2">{{ $download_item.from }} ({{- if .arch }}{{ delimit .arch "/" }} {{- end }}{{ .name }})</a>
                                      {{ $download_available = true }}
                                    {{ end }}
                                  {{ end }}
                                <!-- if the item doesn't have any platform field and it doesn't have 'Authentic' in its name -->
                                {{ else if not (in $download_item.from "Authentic") }}
                                  <a href="{{ $download_item.url }}" rel="noopener noreferrer nofollow" class="btn btn-sm btn-light text-primary m-2">{{ $download_item.from }}</a>
                                  {{ $download_available = true }}
                                {{ end }}
                                {{ if and (eq $index $download_len) (not $download_available) }}
                                  <p class="m-2 text-muted">No download available for others.
                                  <br>
                                  <span class="small">If you know about a URL that provides a download, you can help us by <a href="https://gitlab.com/Softorage/softorage.gitlab.io/issues">opening an issue</a> and selecting layout 'Download URL Suggestion'.</span>
                                  </p>
                                {{ else if and (eq $index $download_len) $download_available }}
                                  {{ $download_available = false }} <!-- resetting the variable '$download_available' -->
                                {{ end }}
                              {{ end -}}
                            </div>
                          </div>
                        </div>
                      </div> <!-- row -->
                    </div>
                    
                    <div class="tab-pane fade" id="download-smptb" role="tabpanel" aria-labelledby="smptb-tab">
                      <div class="row my-2">
                        <div class="col-3">
                          <ul class="nav nav-pills flex-column" role="tablist" aria-orientation="vertical">
                            <li class="nav-item">
                              <a class="nav-link text-clr2 active" data-toggle="tab" href="#download-smptb-android" role="tab" aria-controls="android" aria-selected="true">Android</a>
                            </li>
                            <li class="nav-item">
                              <a class="nav-link text-clr2" data-toggle="tab" href="#download-smptb-ios" role="tab" aria-controls="ios" aria-selected="false">iOS</a>
                            </li>
                            <li class="nav-item">
                              <a class="nav-link text-clr2" data-toggle="tab" href="#download-smptb-other" role="tab" aria-controls="other" aria-selected="false">Other</a>
                            </li>
                          </ul>
                        </div>
                        <div class="col-9">
                          <!-- | or (in $download_item.from "Google Play") | or (in $download_item.from "Apple App") 
                             for now we are showing links for google play and apple app store in android and ios section too, though they are present in authentic(recommended) section too.
                          -->
                          <div class="tab-content">
                            <div class="tab-pane fade show active" id="download-smptb-android" role="tabpanel" aria-labelledby="android-tab">
                              {{- range $index, $download_item := sort .Params.get_it "from" -}} 
                                {{ if $download_item.platform }}
                                  {{ range $download_item.platform }}
                                    {{ if in .hardware "smptb" | and (eq .name "Android") | and (not (in $download_item.from "Authentic")) }}
                                      <a href="{{ $download_item.url }}" rel="noopener noreferrer nofollow"
                                      {{- if or (not .official) (.remarks) }} data-toggle="tooltip" data-placement="top" title="
                                        {{- if .remarks }}{{ .remarks }} {{ end }}
                                        {{- if and (not .official) (.remarks) }}, {{ end }}
                                        {{- if not .official }}
                                          {{- $download_item.from }} | {{- if .arch }} {{ delimit .arch "/" }} {{- end }} Android Unofficial Version
                                        {{- end }}"
                                      {{- end }} class="btn btn-sm btn-light text-primary m-2">{{ $download_item.from }} {{- if .arch }} {{ delimit .arch "/" }} {{- end }}</a> 
                                      {{ $download_available = true }}
                                    {{ end }}
                                  {{ end }}
                                {{ end }}
                                {{ if and (eq $index $download_len) (not $download_available) }} <!-- means to run only if above 'if statement' does not run, current iteration is last in the range loop and $download_available is set to false. -->
                                  <p class="m-2 text-muted">No download available for Android.
                                  <br>
                                  <span class="small">If you know about a URL that provides a download, you can help us by <a href="https://gitlab.com/Softorage/softorage.gitlab.io/issues">opening an issue</a> and selecting layout 'Download URL Suggestion'.</span>
                                  </p>
                                {{ else if and (eq $index $download_len) $download_available }}
                                  {{ $download_available = false }} <!-- resetting the variable '$download_available' -->
                                {{ end }}
                              {{ end -}}
                            </div>
                            <div class="tab-pane fade" id="download-smptb-ios" role="tabpanel" aria-labelledby="ios-tab">
                              {{- range $index, $download_item := sort .Params.get_it "from" -}} 
                                {{ if $download_item.platform }}
                                  {{ range $download_item.platform }}
                                    {{ if in .hardware "smptb" | and (eq .name "iOS") | and (not (in $download_item.from "Authentic")) }}
                                      <a href="{{ $download_item.url }}" rel="noopener noreferrer nofollow"
                                      {{- if or (not .official) (.remarks) }} data-toggle="tooltip" data-placement="top" title="
                                        {{- if .remarks }}{{ .remarks }} {{ end }}
                                        {{- if and (not .official) (.remarks) }}, {{ end }}
                                        {{- if not .official }}
                                          {{- $download_item.from }} | {{- if .arch }} {{ delimit .arch "/" }} {{- end }} iOS Unofficial Version
                                        {{- end }}"
                                      {{- end }} class="btn btn-sm btn-light text-primary m-2">{{ $download_item.from }} {{- if .arch }} {{ delimit .arch "/" }} {{- end }}</a> 
                                      {{ $download_available = true }}
                                    {{ end }}
                                  {{ end }}
                                {{ end }}
                                {{ if and (eq $index $download_len) (not $download_available) }} <!-- means to run only if above 'if statement' does not run, current iteration is last in the range loop and $download_available is set to false. -->
                                  <p class="m-2 text-muted">No download available for iOS.
                                  <br>
                                  <span class="small">If you know about a URL that provides a download, you can help us by <a href="https://gitlab.com/Softorage/softorage.gitlab.io/issues">opening an issue</a> and selecting layout 'Download URL Suggestion'.</span>
                                  </p>
                                {{ else if and (eq $index $download_len) $download_available }}
                                  {{ $download_available = false }} <!-- resetting the variable '$download_available' -->
                                {{ end }}
                              {{ end -}}
                            </div>
                            <div class="tab-pane fade" id="download-smptb-other" role="tabpanel" aria-labelledby="other-tab">
                              {{- range $index, $download_item := sort .Params.get_it "from" -}} 
                                <!-- if the item has platform field -->
                                {{ if $download_item.platform }}
                                  {{ range $download_item.platform }}
                                    {{ if in .hardware "smptb" | and (not ((eq .name "Android") | or (eq .name "iOS") | or (in $download_item.from "Authentic"))) }}
                                    {{/* {{ if not (or (or (or (eq .name "macOS") (eq .name "Linux")) (eq .name "Windows")) (in $download_item.from "Authentic")) }} */}}
                                      <a href="{{ $download_item.url }}" rel="noopener noreferrer nofollow" class="btn btn-sm btn-light text-primary m-2">{{ $download_item.from }} ({{- if .arch }}{{ delimit .arch "/" }} {{- end }}{{ .name }})</a>
                                      {{ $download_available = true }}
                                    {{ end }}
                                  {{ end }}
                                <!-- if the item doesn't have any platform field and it doesn't have 'Authentic' in its name -->
                                {{ else if not (in $download_item.from "Authentic") }}
                                  <a href="{{ $download_item.url }}" rel="noopener noreferrer nofollow" class="btn btn-sm btn-light text-primary m-2">{{ $download_item.from }}</a>
                                  {{ $download_available = true }}
                                {{ end }}
                                {{ if and (eq $index $download_len) (not $download_available) }}
                                  <p class="m-2 text-muted">No download available for others.
                                  <br>
                                  <span class="small">If you know about a URL that provides a download, you can help us by <a href="https://gitlab.com/Softorage/softorage.gitlab.io/issues">opening an issue</a> and selecting layout 'Download URL Suggestion'.</span>
                                  </p>
                                {{ else if and (eq $index $download_len) $download_available }}
                                  {{ $download_available = false }} <!-- resetting the variable '$download_available' -->
                                {{ end }}
                              {{ end -}}
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>
        {{/* relates to if block commented out above {{- end }}*/}}
      {{- end }}
      
      {{- if .Params.website -}}
        &nbsp;&nbsp;&nbsp;&nbsp;<a class="btn bg-nav my-2" href="{{ .Params.website }}" rel="noopener noreferrer nofollow"><span class="text-primary">{{ site.Data.icons.website | safeHTML }}</span>&nbsp; <span class="text-primary">Visit</span></a> <br>
      {{- end -}}
      
      <div class="row my-2 ml-1">
        <span class="fa-2x">{{ site.Data.icons.share | safeHTML }}</span>&nbsp;&nbsp;
        <span class="d-inline-block font-weight-bold border-left border-right"></span>&nbsp;&nbsp;
        <a href="https://www.facebook.com/sharer/sharer.php?u={{ .Permalink }}&quote=Check%20out%20{{ .Title }}%20on%20Softorage" rel="noreferrer nofollow" target="_blank" data-toggle="tooltip" data-placement="bottom" title="Share on Facebook" aria-label="Share on Facebook"><span class="fa-2x">{{ site.Data.icons.facebook | safeHTML }}</span></a>&nbsp;&nbsp;
        <a href="https://twitter.com/intent/tweet?source={{ .Permalink }}&text=Check%20out%20{{ .Title }}%20on%20Softorage:%0A{{ .Permalink }}" rel="noreferrer nofollow" target="_blank" data-toggle="tooltip" data-placement="bottom" title="Share on Twitter" aria-label="Share on Twitter"><span class="fa-2x">{{ site.Data.icons.twitter | safeHTML }}</span></a>&nbsp;&nbsp;
        <!--{{/* G+ is shutting down
        <a href="https://plus.google.com/share?url={{ .Permalink }}&text={{ .Title }}" rel="noreferrer nofollow" target="_blank" title="Share on Google+"><span class="fa-2x">{{ site.Data.icons.googlePlus | safeHTML }}</span></a>&nbsp;&nbsp;
        */}}-->
        <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ .Permalink }}&title=Check%20out%20{{ .Title }}%20on%20Softorage&summary={{ .Params.description }}&source=Softorage" rel="noreferrer nofollow" target="_blank" data-toggle="tooltip" data-placement="bottom" title="Share on LinkedIn" aria-label="Share on LinkedIn"><span class="fa-2x">{{ site.Data.icons.linkedin | safeHTML }}</span></a>&nbsp;&nbsp;
        <a href="whatsapp://send?text={{ .Permalink }}%0A%0ACheck%20out%20{{ .Title }}%20on%20Softorage" data-text="{{ .Title }}" data-href="{{ .Permalink }}" rel="noreferrer nofollow" target="_blank" data-toggle="tooltip" data-placement="bottom" title="Share on Whatsapp" aria-label="Share on Whatsapp"><span class="fa-2x">{{ site.Data.icons.whatsapp | safeHTML }}</span></a>&nbsp;&nbsp;
        <a href="https://reddit.com/submit?url={{ .Permalink }}&title=Check%20out%20{{ .Title }}%20on%20Softorage" rel="noreferrer nofollow" target="_blank" data-toggle="tooltip" data-placement="bottom" title="Share on Reddit" aria-label="Share on Reddit"><span class="fa-2x">{{ site.Data.icons.reddit | safeHTML }}</span></a>&nbsp;&nbsp;
        <a href="mailto:?subject=Check%20out%20{{ .Title }}%20on%20Softorage&body={{ .Params.description }}%0A%0A{{ .Permalink }}" target="_blank" data-toggle="tooltip" data-placement="bottom" title="Share via email" aria-label="Share via email"><span class="fa-2x">{{ site.Data.icons.email | safeHTML }}</span></a>
      </div>
      <!--
      <a href="https://gitlab.com/Softorage/softorage.gitlab.io/blob/master/content/{{ .File.Path }}" class="badge small my-2" target="_blank">&#60;/page-source&#62;</a>
      -->
      
    </div>
  </div>
</div>
<!-- -->
<div class="container bg-nav text-center small py-2" style="overflow-x: auto;">
  <nobr>
  <a class="text-antinav text-decoration-none" href="#overview">Overview</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#platform">Platform</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#social">Social</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#sysreq">System Requirements</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#rating">Ratings</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#developer">Developer</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#written_in">Written in</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#initial_release">Initial Release</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#repository">Repository</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#license">License</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#categories">Categories</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#alternatives">Alternatives</a>&nbsp;&nbsp;&nbsp;
  </nobr>
</div>
<!-- -->
<div class="container-fluid bg-antinav-light py-3">
  <div class="row">
    <div class="col-md-8">
      <!-- #7 Overview -->
      <div class="card mb-3">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <span class="anchor" id="overview"></span>
              <h2 class="card-title h4 m-0">Overview</h2>
            </div>
            <div class="col-auto">
              <span class="float-right">
                {{- if .Params.source.overview -}}
                  <a role="button" class="btn btn-sm" tabindex="0" aria-label="Source(s)" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="Source(s)" data-content="
                    {{- range $index, $element := .Params.source.overview }}
                      {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                    {{- end -}}
                  "><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
                {{- end -}}
                <a role="button" class="btn btn-sm" tabindex="0" aria-label="What is this card" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="Helps you to quickly get a grasp of how and what the software does."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
              </span>
            </div>
          </div>
          <div class="card-text mt-3">
            {{- if .Content }}
              {{- replace .Content ">  I  <" ">&nbsp;&nbsp;|&nbsp;&nbsp;<" | safeHTML }}
            {{- else -}}
              {{ $no_content | safeHTML }}
            {{- end -}}
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <!-- #13 Platform -->
      <div class="card mb-3">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <span class="anchor" id="platform"></span>
              <h2 class="card-title h4 m-0">Platform</h2>
            </div>
            <div class="col-auto">
              <span class="float-right">
                {{ if .Params.source.platform }}
                  <a role="button" class="btn btn-sm" tabindex="0" aria-label="Source(s)" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="Source(s)" data-content="
                    {{- range .Params.source.platform }}
                      {{- if .dskp -}}
                        {{ site.Data.icons.desktop | safeHTMLAttr }} : <br>
                        {{- range $index, $element := .dskp }}
                          {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                        {{- end }} <hr>
                      {{- else if .smptb -}}
                        {{ site.Data.icons.mobile | safeHTMLAttr }} / {{ site.Data.icons.tab | safeHTMLAttr }} : <br>
                        {{- range $index, $element := .smptb }}
                          {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                        {{- end }} <hr>
                      {{- else if .else -}}
                        {{ site.Data.icons.bars | safeHTMLAttr }} : <br>
                        {{- range $index, $element := .else }}
                          {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                        {{- end }} <hr>
                      {{- end }}
                    {{- end -}}
                  "><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
                {{- end -}}
                <a role="button" class="btn btn-sm" tabindex="0" aria-label="What is this card" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="Which platforms, is the software available on. Orange borders mean unofficial release."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
              </span>
            </div>
          </div>
          <p class="card-text mt-3">
            {{- if .Params.platform }}
              {{- range .Params.platform }}
                {{- partial "reusables/platform.html" . }}
              {{- end }}
            {{- else -}}
              {{ $no_content | safeHTML }}
            {{- end -}}
          </p>
        </div>
      </div>
      <!-- #16 Social -->
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <span class="anchor" id="social"></span>
              <h2 class="card-title h4 m-0">Social</h2>
            </div>
            <div class="col-auto">
              <span class="float-right">
                <a role="button" class="btn btn-sm" tabindex="0" aria-label="What is this card" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="Social presence across the internet."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
              </span>
            </div>
          </div>
          <p class="card-text mt-3">
          
          <!-- We will be using .Scratch here, as there is involved rewriting of variables multiple times -->
          
            {{- if .Params.social }}
              
              <!-- Range through all elements from the social param and assign (Set) respective value to $scratch -->
              {{- range $index, $element := .Params.social }}
                {{- if eq $element.name "Wikipedia" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.wikipedia ) `</span></a>`) "") -}}
                {{- else if eq $element.name "YouTube" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.youtube ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Facebook" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.facebook ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Twitter" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.twitter ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Pinterest" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.pinterest ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Instagram" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.instagram ) `</span></a>`) "") -}}
                {{- else if eq $element.name "LinkedIn" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.linkedin ) `</span></a>`) "") -}}
                {{- else if eq $element.name "VK" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.vk ) `</span></a>`) "") -}}
                {{- else if eq $element.name "DeviantArt" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.deviantart ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Google+" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.googlePlus ) `</span></a>`) "") -}}
                {{- else if eq $element.name "reddit" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.reddit ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Flickr" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.flickr ) `</span></a>`) "") -}}
                {{- else if eq $element.name "mastodon" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.mastodon ) `</span></a>`) "") -}}
                {{- else if eq $element.name "GitHub" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.github ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Steam" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.steam ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Bandcamp" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.bandcamp ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Medium" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a` ` aria-label="` $.Title ` on ` $element.name `"` ` href="` $element.url `" rel="noopener nofollow"><span class="fa-2x">` ( safeHTML site.Data.icons.medium ) `</span></a>`) "") -}}
                {{- else -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a class="border p-1" href="` $element.url `" rel="noopener nofollow"><span>` $element.name `</span></a>`) "") -}}
                {{- end -}}
                <!-- Get the value stored in $scratch -->
                {{- if $index }}&nbsp; {{ end }}{{ $scratch.Get "social_item" }}
              {{- end -}} <!-- end range -->
            {{- else -}}
              {{ $no_content | safeHTML }}
            {{- end -}}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container-fluid bg-antinav-light py-3">
  <div class="row">
    <div class="col-md-8">
      <!-- #8 System Requirements -->
      <div class="card mb-3">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <span class="anchor" id="sysreq"></span>
              <h2 class="card-title h4 m-0">System Requirements</h2>
            </div>
            <div class="col-auto">
              <span class="float-right">
                {{- if .Params.source.sysreq -}}
                  <a role="button" class="btn btn-sm" tabindex="0" aria-label="Source(s)" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="Source(s)" data-content="
                    {{- range $nav_name, $nav_element := .Params.source.sysreq }}
                      <span class='small font-weight-bold'>{{ upper $nav_name }}</span> :<br>
                      {{- range $index, $src_element := $nav_element -}}
                        {{ add $index 1 }} {{ if reflect.IsSlice $src_element }}<a href='{{ index $src_element 0 }}'>{{ index $src_element 1 }}</a>{{ else }}<a href='{{ $src_element }}'>{{ $src_element }}</a>{{ end }}<br>
                      {{- end }}
                    {{- end -}}
                  "><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
                {{- end -}}
                <a role="button" class="btn btn-sm" tabindex="0" aria-label="What is this card" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="System configuration you should have to run the software peacefully."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
              </span>
            </div>
          </div>
          <div class="card-text mt-3">
            {{ if .Params.sysreq }}
          
              <!-- declare variable $navNames as an empty array (slice), to store names of navs -->
              {{ $navNames := slice }}
              <!-- $arrayItemNumberSysReq stores number of current nav (less 1; array style) -->
              {{ $arrayItemNumberSysReq := 0 }}
              <!-- $arrayItemNumberSysReqMaxCount stores total number of navs (less 1) -->
              {{ $arrayItemNumberSysReqMaxCount := sub (len .Params.sysreq) 1 }}
              
              <!-- range through map .Params.sysreq; $name is key, $element is value -->
              {{- range $name, $element := .Params.sysreq -}}
                {{ $navNames = $navNames | append $name }} <!-- store all navs names in $navNames array (slice) -->
              {{ end }}
              
              <ul class="nav nav-tabs rounded-lg shadow-sm" role="tablist">
                <!-- we have sorted this range in desc order, we must also sort div.tab-content range in desc order wrt key to achive needed result -->
                {{/* range $i, $e := sort $navNames "value" "desc" */}}
                {{ range $i, $e := $navNames }}
                
                  <li class="nav-item">
                    <a class="nav-link{{ if not $i }} active{{ end }} text-clr2 small font-weight-bold" id="sysreq-{{$e}}-tab" data-toggle="tab" href="#sysreq-tab-{{ replace $e " " "-" }}" role="tab" aria-controls="sysreq-tab-{{$e}}"{{ if not $i }} aria-selected="true"{{ end }}>{{ $e | upper }}</a>
                  </li>
                
                {{ end }}
                
              </ul>
              
              <div class="tab-content" id="sysreq_tab_content">
                
                <!-- https://discourse.gohugo.io/t/how-to-sort-in-reverse-order-by-preserving-the-order/25827/9 -->
                <!-- range through map .Params.sysreq; $name is key -->
                {{- range $name, $element := .Params.sysreq -}}
                  {{ range $i, $rowElement := $element }}
                  
                    {{- if $rowElement.min -}}
                      {{- $minimum = true -}}
                    {{- end -}}
                    {{- if $rowElement.recm -}}
                      {{- $recommended = true -}}
                    {{- end -}}
                    {{- if $rowElement.optm -}}
                      {{- $optimal = true -}}
                    {{- end -}}
                    {{/*- if minimum and recommended and optimal all are true then break -*/}}
                  
                  {{ end }}
                  
                  <div class="tab-pane fade{{ if not $arrayItemNumberSysReq }} show active{{ end }}" id="sysreq-tab-{{ replace $name  " " "-" }}" role="tabpanel" aria-labelledby="sysreq-{{ replace $name  " " "-" }}-tab">
                    
                    <div class="table-responsive-md">
                      <table class="text-antinav">
                        <thead>
                          <tr>
                            <th scope="col">#</th>
                            {{- if $minimum -}}
                              <th scope="col">Minimum</th>
                            {{- end }}
                            {{- if $recommended -}}
                              <th scope="col">Recommended</th>
                            {{- end }}
                            {{- if $optimal -}}
                              <th scope="col">Optimal</th>
                            {{- end -}}
                          </tr>
                        </thead>
                        <tbody>
                          <!-- range through array $element; $index is iteration count -->
                          {{- range $index, $rowElement := $element  -}}
                            <tr>
                            
                              <th scope="row">{{ add $index 1 }}</th>
                                {{- if $minimum -}}
                                <td>
                                  {{- if $rowElement.min }}
                                    {{- safeHTML (replace ($.Page.RenderString (replace $rowElement.min " | " "  I  ")) "  I  " " | ") }}
                                  {{- end -}}
                                </td>
                                {{- end }}
                                {{- if $recommended -}}
                                <td>
                                  {{- if $rowElement.recm }}
                                    {{- safeHTML (replace ($.Page.RenderString (replace $rowElement.recm " | " "  I  ")) "  I  " " | ") -}}
                                  {{- end -}}
                                </td>
                                {{- end }}
                                {{- if $optimal -}}
                                <td>
                                  {{- if $rowElement.optm }}
                                    {{- safeHTML (replace ($.Page.RenderString (replace $rowElement.optm " | " "  I  ")) "  I  " " | ") }}
                                  {{- end -}}
                                </td>
                                {{- end }}
                                
                            </tr>
                          {{- end -}}
                        </tbody>
                      </table>
                    <!-- /table-responsive -->
                    </div>
                  
                  </div>
                  
                  {{ if not (eq $arrayItemNumberSysReq $arrayItemNumberSysReqMaxCount) }}
                    <!-- if not last iteration, keep up counting current loop iteration -->
                    {{ $arrayItemNumberSysReq = add $arrayItemNumberSysReq 1 }}
                  {{ else }}
                    <!-- else, reset count to zero for further use if any -->
                    {{ $arrayItemNumberSysReq = 0 }}
                  {{ end }}
                  
                  {{- $recommended = false -}}
                  {{- $optimal = false -}}
                  {{- $minimum = false -}}
                  
                {{ end }}
              
              </div>
            
            {{- else -}}
              {{ $no_content | safeHTML }}
            {{- end -}}
          </div>
          <!-- /card-text -->
        </div>
        <!-- /card-body -->
      </div>
      <!-- /card -->
    </div>
    <!-- /col-md-8 -->
    <div class="col-md-4">
      <!-- #18 Rating -->
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <span class="anchor" id="rating"></span>
              <h2 class="card-title h4 m-0">Ratings</h2>
            </div>
            <div class="col-auto">
              <span class="float-right">
                <a role="button" class="btn btn-sm" tabindex="0" aria-label="What is this card" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="An overview of various reviews and ratings by different reviewers. Since ratings change over time, numbers may not be exact."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
              </span>
            </div>
          </div>
          <div class="card-text mt-3">
            {{- if .Params.rating }}
              <div class="text-center align-middle small text-muted">
                Aggregate
              </div>
              <div class="d-flex justify-content-center align-middle mb-2">
                <span class="font-weight-bold h5">{{ lang.NumFmt 2 (mul $rating_stars 5) }}</span>&nbsp;<!-- "lang.NumFmt 2" formats a number with a given precision, here 2. Eg, 4.09158 to 4.09 -->
                
                <div class="rating-stars" style="--rating: {{ $rating_stars }};" aria-label="Rating: {{ lang.NumFmt 2 (mul $rating_stars 5) }} out of 5"></div>
                
                &nbsp;<span class="h5">5</span>
              </div>
              <hr class="my-1">
              <div class="table-responsive-lg" style="max-height: 35.5rem; overflow: auto;">
                <table class="table-borderless border-0 text-antinav">
                  <tbody>
                    {{- range $index, $rt := sort .Params.rating "name" -}}
                      <tr>
                        <th class="py-2" scope="row">
                          {{- $rt.name }}
                          {{- if $rt.remarks }}<br><span class="small text-muted">{{ $rt.remarks }}</span>{{ end -}}
                        </th>
                        <td class="py-2 px-auto text-nowrap">
                          <span>{{ index $rt.rate 0 }}</span>&nbsp;
                          
                          <div class="rating-stars mt-2" style="--rating: {{ div (mul (index $rt.rate 0) 1.0) (index $rt.rate 1) }};" aria-label="Rating: {{ mul (div (mul (index $rt.rate 0) 1.0) (index $rt.rate 1)) 5 }} out of 5"></div>
                          
                          &nbsp;<span>{{ index $rt.rate 1 }}</span>
                        </td>
                        <td class="py-2">
                          {{- if $rt.num -}}
                            <span class="text-muted small">based on {{ $rt.num }} reviews</span>
                          {{- else -}}
                            <span class="text-muted small">based on professional's opinion</span>
                          {{- end -}}
                        </td>
                        <td class="py-2">
                          <span class="float-right">
                            {{- range $index_src, $rt_src := $.Params.source.rating -}}
                              <!-- check whether 0th element of array which is name of reviewer is same as the concerned rating's reviewer -->
                              {{- if eq $rt_src.name $rt.name -}}
                                <!-- whether the review is based on a number of user opinions -->
                                {{- if $rt.num -}}
                                  <!-- check whether the array of 'src_rating' has 2nd element "user", which corresponds to "based on a number of users' opinion" -->
                                  {{- if eq $rt_src.type "user" -}}
                                    {{- if $rt.remarks -}}
                                      {{- if and $rt_src.remarks (eq $rt.remarks $rt_src.remarks) -}}
                                        <a role="button" class="btn btn-sm" tabindex="0" aria-label="Source(s)" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="Source(s)" data-content="<a href='{{ $rt_src.url }}'>{{ $rt_src.url }}</a>"><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
                                      {{- end -}}
                                    {{- else -}}
                                      {{- if not $rt_src.remarks -}}
                                        <a role="button" class="btn btn-sm" tabindex="0" aria-label="Source(s)" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="Source(s)" data-content="<a href='{{ $rt_src.url }}'>{{ $rt_src.url }}</a>"><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
                                      {{- end }}
                                    {{- end }}
                                  {{- end }}
                                {{- else -}}
                                  <!-- in case rating is based on a professsional's opinion -->
                                  {{- if eq $rt_src.type "expert" -}}
                                    {{- if $rt.remarks -}}
                                      {{- if and $rt_src.remarks (eq $rt.remarks $rt_src.remarks) -}}
                                        <a role="button" class="btn btn-sm" tabindex="0" aria-label="Source(s)" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="Source(s)" data-content="<a href='{{ $rt_src.url }}'>{{ $rt_src.url }}</a>"><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
                                      {{- end }}
                                    {{- else }}
                                      {{- if not $rt_src.remarks -}}
                                        <a role="button" class="btn btn-sm" tabindex="0" aria-label="Source(s)" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="Source(s)" data-content="<a href='{{ $rt_src.url }}'>{{ $rt_src.url }}</a>"><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
                                      {{- end }}
                                    {{- end }}
                                  {{- end }}
                                {{- end }}
                              {{- end }}
                            {{- end -}}
                          </span>
                        </td>
                      </tr>
                    {{- end }}
                  </tbody>
                </table>
              </div>
            {{- else -}}
              {{ $no_content | safeHTML }}
            {{- end -}}
          </div>
        </div>
      </div>
    </div>
    <!-- /col-md-4 -->
  </div>
  <!-- /row -->
</div>
<div class="container-fluid bg-antinav-light pb-3">
  <div class="card-deck mb-3">
    <!-- #9 Developer -->
    <div class="card">
      <div class="card-body">
        <div class="row">
          <div class="col">
            <span class="anchor" id="developer"></span>
            <h2 class="card-title h4 m-0">Developer</h2>
          </div>
          <div class="col-auto">
            <span class="float-right">
              {{- if .Params.source.developer -}}
                <a role="button" class="btn btn-sm" tabindex="0" aria-label="Source(s)" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="Source(s)" data-content="
                  {{- range $index, $element := .Params.source.developer }}
                    {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                  {{- end -}}
                "><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
              {{- end -}}
              <a role="button" class="btn btn-sm" tabindex="0" aria-label="What is this card" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="Get to know who developed the software."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
            </span>
          </div>
        </div>
        <p class="card-text mt-3">
          {{- if .Params.developer }}
            {{- range $index, $element := .Params.developer }}
              {{- if $index }}, {{ end }}{{ replace (replace $element `<OD>` `<abbr title="Original Developer">(OD)</abbr>`) `<BDFL>` `<abbr title="Benevolent Dictator For Life">(BDFL)</abbr>` | safeHTML }}
            {{- end }}
          {{- else -}}
            {{ $no_content | safeHTML }}
          {{- end -}}
        </p>
      </div>
    </div>
    <!-- #12 Written In -->
    <div class="card">
      <div class="card-body">
        <div class="row">
          <div class="col">
            <span class="anchor" id="written_in"></span>
            <h2 class="card-title h4 m-0">Written in</h2>
          </div>
          <div class="col-auto">
            <span class="float-right">
              {{- if .Params.source.written_in -}}
                <a role="button" class="btn btn-sm" tabindex="0" aria-label="Source(s)" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="Source(s)" data-content="
                  {{- range $index, $element := .Params.source.written_in }}
                    {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                  {{- end -}}
                "><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
              {{- end -}}
              <a role="button" class="btn btn-sm" tabindex="0" aria-label="What is this card" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="Computer language(s), in which the software is written."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
            </span>
          </div>
        </div>
        <p class="card-text mt-3">
          {{- if .Params.written_in }}
            {{- delimit .Params.written_in ", " }}
          {{- else -}}
            {{ $no_content | safeHTML }}
          {{- end -}}
        </p>
      </div>
    </div>
    <!-- #10 Initial Release -->
    <div class="card">
      <div class="card-body">
        <div class="row">
          <div class="col">
          <span class="anchor" id="initial_release"></span>
          <h2 class="card-title h4 m-0">Initial Release</h2>
          </div>
          <div class="col-auto">
            <span class="float-right">
              {{- if .Params.source.initial_release -}}
                <a role="button" class="btn btn-sm" tabindex="0" aria-label="Source(s)" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="Source(s)" data-content="
                  {{- range $index, $element := .Params.source.initial_release }}
                    {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                  {{- end -}}
                "><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
              {{- end -}}
              <a role="button" class="btn btn-sm" tabindex="0" aria-label="What is this card" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="When was the software initially released. Elder the software, more trustworthy it is."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
            </span>
          </div>
        </div>
        <p class="card-text mt-3">
          {{- if .Params.initial_release }}
            {{- delimit .Params.initial_release ", " }}
          {{- else -}}
            {{ $no_content | safeHTML }}
          {{- end -}}
        </p>
      </div>
    </div>
  </div>
  <div class="card-deck mb-3">
    <!-- #11 Repository -->
    <div class="card">
      <div class="card-body">
        <div class="row">
          <div class="col">
            <span class="anchor" id="repository"></span>
            <h2 class="card-title h4 m-0">Repository</h2>
          </div>
          <div class="col-auto">
            <span class="float-right">
              <a role="button" class="btn btn-sm" tabindex="0" aria-label="What is this card" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="Here you can find source code of the software. Have a look!"><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
            </span>
          </div>
        </div>
        <p class="card-text mt-3">
          {{- if .Params.repository }}
            {{- range $index, $element := .Params.repository }}
              {{- if $index }}, {{ end }}<a href="{{ safeURL $element }}" rel="noopener noreferrer nofollow">{{ $element }}</a> <span class="small"><span class="fa-xs text-muted">{{ site.Data.icons.externalLink | safeHTML }}</span></span>
            {{- end }}
          {{- else if in .Params.license "Proprietary" -}}
            {{- $.Title }} being a proprietary software, its source code is not publicly hosted.
          {{- else }}
            {{- $no_content | safeHTML }}
          {{- end -}}    
        </p>
      </div>
    </div>
    <!-- #15 License -->
    <div class="card">
      <div class="card-body">
        <div class="row">
          <div class="col">
            <span class="anchor" id="license"></span>
            <h2 class="card-title h4 m-0">License</h2>
          </div>
          <div class="col-auto">
            <span class="float-right">
              {{- if .Params.source.license -}}
                <a role="button" class="btn btn-sm" tabindex="0" aria-label="Source(s)" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="Source(s)" data-content="
                  {{- range $index, $element := .Params.source.license }}
                    {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                  {{- end -}}
                "><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
              {{- end -}}
              <a role="button" class="btn btn-sm" tabindex="0" aria-label="What is this card" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="What is this card" data-content="License helps you to know the terms by which use of software is allowed. To quickly get a grasp, refer <a href='https://tldrlegal.com/'>tl;drLegal</a>."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
            </span>
          </div>
        </div>
        <p class="card-text mt-3">
          {{- if .Params.license }}
            {{- range $index, $element := .Params.license }}
              {{- if $index }}, {{ end }}<span{{ if in $element "(m)" }} title="{{ $element }} modified"{{ end }}>{{ $element }}</span>
            {{- end }}
          {{- else -}}
            {{ $no_content | safeHTML }}
          {{- end -}}
        </p>
      </div>
    </div>
    <!-- #14 Categories -->
    <div class="card">
      <div class="card-body">
        <div class="row">
          <div class="col">
            <span class="anchor" id="categories"></span>
            <h2 class="card-title h4 m-0">Categories</h2>
          </div>
          <div class="col-auto">
            <span class="float-right">
              <a role="button" class="btn btn-sm" tabindex="0" aria-label="What is this card" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="What type of software it is. Helps you with classification."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
            </span>
          </div>
        </div>
        <p class="card-text mt-3">
          {{- if .Params.categories }}
            {{- range $i, $e := .Params.categories }}
              {{- if $i }},  {{ end }}<a href="/categories/{{ lower (replace $e " " "-") }}/">{{ $e }}</a>
            {{- end -}}
          {{- else -}}
            {{ $no_content | safeHTML }}
          {{- end -}}
        </p>
      </div>
    </div>
  </div>
  <!-- Alternatives -->
  <!-- total number of software (subtracted 1 since they start from zero) -->
  {{ $total_soft := sub (len (where site.RegularPages "Type" "==" "software")) 1 }}
  <!-- stores availability of software for given category -->
  {{ $categ_available := false }}
  <div class="card">
    <div class="card-body">
      <span class="anchor" id="alternatives"></span>
      <h2 class="card-title h4 m-0">Alternatives</h2>
      <!-- We won't be showing softwares that are covered under "Framework" category -->
      <div class="card-text mt-3">
        {{- range $i, $category := .Params.categories }}
          {{- if ne $category "Framework" -}}
            {{- if $i }}<br>{{ end -}}
            <span class="h6">{{ $category }}</span><br>
            {{- range $index, $current := where site.RegularPages "Type" "==" "software" }}
              {{- if and (not (eq $current.Params.title $.Title)) (in $current.Params.categories $category) -}}
                <a class="btn btn-sm btn-light shadow-sm my-2" {{- if in $current.Params.license "Proprietary" }} data-toggle="tooltip" data-placement="top" title="Proprietary" {{- else }} data-toggle="tooltip" data-placement="top" title="Free and Open Source" {{- end }} href="{{ $current.Permalink }}">{{ replace (replace $current.Params.title "(" "<span class='small' style='font-weight: 400;'>(") ")" ")</span>" | safeHTML }}</a> &nbsp;
                {{ $categ_available = true }}
              {{- end }}
              {{ if and (eq $index $total_soft) (not $categ_available) }} <!-- means to run only if above 'if statement' does not run, current iteration is last in the range loop and $categ_available is set to false. -->
                <p class="m-2 text-muted">No alternative software available under '{{ $category }}' category.</p>
              {{ else if and (eq $index $total_soft) $categ_available }}
                {{ $categ_available = false }} <!-- resetting the variable '$categ_available' -->
              {{ end }}
            {{- end -}}
          {{- end }}
        {{- end -}}
      </div>
    </div>
  </div>
  {{- if .Params.note -}}
    <hr>
    <!-- Notes -->
    <div class="card">
      <div class="card-body">
        <h2 class="card-title h4 m-0">Notes</h2>
        <div class="card-text mt-3">
          {{ $.Page.RenderString .Params.note }}
        </div>
      </div>
    </div>
  {{- end -}}
  {{- if .GitInfo -}}
  <br>
  <p class="bg-nav text-antinav text-center small p-2">This page was last updated with commit: <a class="font-weight-bold" href="https://gitlab.com/{{ site.Title }}/softorage.gitlab.io/commit/{{ .GitInfo.Hash }}">{{ .GitInfo.Subject }} ({{ .GitInfo.AbbreviatedHash }})</a></p>
  <!--{{/* on {{ .GitInfo.AuthorDate.Format "02 January, 2006" }} */}}-->
  {{- end -}}
  
</div>

{{- end }}
