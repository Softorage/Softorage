{{ define "main" -}}

<!-- Tell Hugo whether in 'System Requirements' Minimum or Recomended or Optimal data fields are present -->
<!-- We want the whole Minimum column to exist even if one specification has Minimum specification stated in data file. Same goes for recommended and optimal. -->
{{- $recommended := false -}}
{{- $optimal := false -}}
{{- $minimum := false -}}
{{- if .Params.sysreq -}}
  {{- range .Params.sysreq -}}
    {{- if .min -}}
      {{- $minimum = true -}}
    {{- end -}}
    {{- if .recm -}}
      {{- $recommended = true -}}
    {{- end -}}
    {{- if .optm -}}
      {{- $optimal = true -}}
    {{- end -}}
    {{/*- if minimum and recommended and optimal all are true then break -*/}}
  {{- end -}}
{{- end }}

{{- $no_content := "Not available, but hey, you could <a href='#contribute'>help</a>!" -}}
<!-- -->
<div class="container-fluid bg-clr2-light text-clr2 py-3 position-relative shadow-sm">
  <div style="height:3.5rem;"></div>
  <div class="row">
    <div class="col-md-8">
      <div class="row p-3">
        <!-- Defining $rating_stars as a global variable -->
        {{- $rating_stars := 0 }}
        {{- if .Params.image -}}
          <div class="align-middle text-center col-auto">
            <img class="bg-nav rounded shadow-sm p-2" style="height:5rem;" src="{{ .Params.image }}" alt="{{ .Title }} logo">  
            <br>
            {{- if .Params.rating }}
              {{- $len := len .Params.rating }} <!-- length of loop -->
              {{- range $index, $rt := .Params.rating }}
                {{- $rating_stars = add $rating_stars (div (mul (index $rt.rate 0) 1.0) (index $rt.rate 1)) -}} <!-- if one is float then only is the result a float -->
              {{- end }}
              {{- $rating_stars = div $rating_stars $len }}
              <div class="d-inline-block rating-stars text-center mt-2">
                <div class="rating-stars-top" style="width: {{ math.Round (mul $rating_stars 100) }}%"><!-- for some reason it works better with 125 (edit: not anymore. reason is clarified in stylesheet) -->
                  <span>&#9733;</span><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span>
                </div>
                <div class="rating-stars-bottom">
                  <span>&#9733;</span><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span>
                </div>
              </div>
            {{- end -}}
          </div>
        {{- end -}}
        <div class="col">
          <h1 class="display-4">{{ .Title }}</h1>
          {{- if .Params.description -}}
            <p class="small">{{ .Params.description }}</p>
          {{- end -}}
          
          {{ if not .Params.image }}
            {{- if .Params.rating }}
              {{ $len := len .Params.rating }} <!-- length of loop -->
              {{- range $index, $rt := .Params.rating -}}
                {{ $rating_stars = add $rating_stars (div (mul (index $rt.rate 0) 1.0) (index $rt.rate 1)) -}} <!-- if one is float then only is the result a float -->
              {{ end }}
              {{ $rating_stars = div $rating_stars $len }}
              <div class="d-inline-block rating-stars">
                <div class="rating-stars-top" style="width: {{ math.Round (mul $rating_stars 100) }}%"><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span></div>
                <div class="rating-stars-bottom"><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span></div>
              </div>
            {{ end }}
          {{ end }}
          
        </div>
      </div>

      <!-- As we don't check whether page.status is true, `status` is shown `unknown` when page.status is false. -->
      {{- if in .Params.status "Active" -}}
        <!-- in case of source, as first condition in if statement, we have checked if source is not a text-type(as src.first exists only if it is a text-type source), that is, it is a webpage, because it is more frequent condition -->
        <a role="button" class="btn btn-sm bg-nav mb-2" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="Active" data-html="true" data-content="
          {{/* 
            Here, the code iterates through a range, hence even if there is only one value of source for status, it has to be in square brackes([]) in the front matter, so that it is treated as an array. This is to ensure that a source from a book would not be mistaken by our code as two sources from web.
            Example,
            ["txt"] => one source from web
            ["txt1","txt2"] => two sources from web
            [["txt1","txt2"]] => one source from (say) book, txt1 being link, and txt2 being the text to be hyperlinked.
          */}}
          {{- if .Params.source.status }}
            {{- range $index, $element := .Params.source.status }}
              {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
            {{- end }}
          {{- else -}}
            {{ $no_content | safeHTMLAttr }}
          {{- end -}}
        "><span class="small text-success">Status | {{ site.Data.icons.checkmark | safeHTML }}</span></a>
      {{- else if in .Params.status "Discontinued" -}}
        <a role="button" class="btn btn-sm bg-nav mb-2" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="Discontinued" data-html="true" data-content="
          {{- if .Params.source.status }}
            {{- range $index, $element := .Params.source.status }}
              {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
            {{- end }}
          {{- else -}}
            {{ $no_content | safeHTMLAttr }}
          {{- end -}}
        "><span class="small text-danger">Status | {{ site.Data.icons.ban | safeHTML }}</span></a>
      {{- else -}}
        <a role="button" class="btn btn-sm bg-nav mb-2" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="Unknown" data-html="true" data-content="
          {{- if .Params.source.status }}
            {{- range $index, $element := .Params.source.status }}
              {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
            {{- end }}
          {{- else -}}
            {{ $no_content | safeHTMLAttr }}
          {{- end -}}
        "><span class="small text-warning">Status | {{ site.Data.icons.question | safeHTML }}</span></a>
      {{- end -}}
    </div>
    <div class="col-md-4">
      {{- if .Params.get_it }}
        {{- if eq (len .Params.get_it) 1 -}}
          <a href="{{ (index .Params.get_it 0).url }}" class="btn bg-nav my-2"><span class="text-primary">{{ site.Data.icons.download | safeHTML }}</span>&nbsp; <span class="text-primary">Get it</span></a>
        {{- else -}}
        <a role="button" class="btn bg-nav my-2" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="Get it from" data-html="true" data-content="
          {{- range .Params.get_it -}} 
            <a href='{{ .url }}' class='btn btn-sm
              {{- if eq .from "Authentic" }} btn-success
              {{- else }} btn-light
              {{- end -}}
            '>{{ .from }}</a>&nbsp;
          {{ end -}}
        "><span class="text-primary">{{ site.Data.icons.download | safeHTML }}</span>&nbsp; <span class="text-primary">Get it</span></a>
        {{- end }}
      {{- end }}
      {{- if .Params.website -}}
        &nbsp;&nbsp;<a class="btn bg-nav my-2" href="{{ .Params.website }}"><span class="text-primary">{{ site.Data.icons.website | safeHTML }}</span>&nbsp; <span class="text-primary">Visit</span></a> <br>
      {{- end -}}
      <div class="row my-2 p-2">
        <span class="fa-2x">{{ site.Data.icons.share | safeHTML }}</span>&nbsp;&nbsp;&nbsp;&nbsp;
        <a href="https://www.facebook.com/sharer/sharer.php?u={{ site.BaseURL }}{{ .Permalink }}&quote={{ .Title }}" rel="nofollow" target="_blank" title="Share on Facebook"><span class="fa-2x">{{ site.Data.icons.facebook | safeHTML }}</span></a>&nbsp;&nbsp;
        <a href="https://twitter.com/intent/tweet?source={{ site.BaseURL }}{{ .Permalink }}&text={{ .Title }}:{{ site.BaseURL }}{{ .Permalink }}" rel="nofollow" target="_blank" title="Share on Twitter"><span class="fa-2x">{{ site.Data.icons.twitter | safeHTML }}</span></a>&nbsp;&nbsp;
        <!-- G+ is shutting down
        <a href="https://plus.google.com/share?url={{ site.BaseURL }}{{ .Permalink }}&text={{ .Title }}" rel="nofollow" target="_blank" title="Share on Google+"><span class="fa-2x">{{ site.Data.icons.googlePlus | safeHTML }}</span></a>&nbsp;&nbsp;
        -->
        <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ site.BaseURL }}{{ .Permalink }}&title={{ .Title }}&summary={{ .Params.description }}&source=Softorage" rel="nofollow" target="_blank" title="Share on LinkedIn"><span class="fa-2x">{{ site.Data.icons.linkedin | safeHTML }}</span></a>&nbsp;&nbsp;
        <a href="whatsapp://send?text={{ site.BaseURL }}{{ .Permalink }}%20{{ .Title }}" data-text="{{ .Title }}" data-href="{{ site.BaseURL }}{{ .Permalink }}" rel="nofollow" target="_blank" title="Share on Whatsapp"><span class="fa-2x">{{ site.Data.icons.whatsapp | safeHTML }}</span></a>&nbsp;&nbsp;
        <a href="https://reddit.com/submit?url={{ site.BaseURL }}{{ .Permalink }}&title={{ .Title }}" rel="nofollow" target="_blank" title="Share on Reddit"><span class="fa-2x">{{ site.Data.icons.reddit | safeHTML }}</span></a>&nbsp;&nbsp;
        <a href="mailto:?subject={{ .Title }}&body={{ .Params.description }}:{{ site.BaseURL }}{{ .Permalink }}" target="_blank" title="Share via email"><span class="fa-2x">{{ site.Data.icons.email | safeHTML }}</span></a>
      </div>
      <a href="https://gitlab.com/Softorage/softorage.gitlab.io/blob/master/content/{{ .File.Path }}" class="badge small my-2" target="_blank">&#60;/page-source&#62;</a>
    </div>
  </div>
</div>
<!-- -->
<div class="container bg-nav text-center small py-2" style="overflow-x: scroll;">
  <nobr>
  <a class="text-antinav text-decoration-none" href="#overview">Overview</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#platform">Platform</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#socail">Social</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#sysreq">System Requirements</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#rating">Ratings</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#developer">Developer</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#written_in">Written in</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#initial_release">Initial Release</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#repository">Repository</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#license">License</a>&nbsp;&nbsp;&nbsp;
  <a class="text-antinav text-decoration-none" href="#categories">Categories</a>&nbsp;&nbsp;&nbsp;
  </nobr>
</div>
<!-- -->
<div class="container-fluid bg-antinav-light py-3">
  <div class="row">
    <div class="col-md-8">
      <!-- #7 Overview -->
      <div class="card mb-3">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <span class="anchor" id="overview"></span>
              <h2 class="card-title h4 m-0">Overview</h2>
            </div>
            <div class="col-auto">
              <span class="float-right">
                {{- if .Params.source.overview -}}
                  <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-html="true" data-original-title="Source(s)" data-content="
                    {{- range $index, $element := .Params.source.overview }}
                      {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                    {{- end -}}
                  "><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
                {{- end -}}
                <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="Helps you to quickly get a grasp of how and what the software does."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
              </span>
            </div>
          </div>
          <div class="card-text mt-3">
            {{- if .Content }}
              {{- .Content }}
            {{- else -}}
              {{ $no_content | safeHTML }}
            {{- end -}}
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <!-- #13 Platform -->
      <div class="card mb-3">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <span class="anchor" id="platform"></span>
              <h2 class="card-title h4 m-0">Platform</h2>
            </div>
            <div class="col-auto">
              <span class="float-right">
                {{ if .Params.source.platform }}
                  <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-html="true" data-original-title="Source(s)" data-content="
                    {{- range .Params.source.platform }}
                      {{- if .dskp -}}
                        {{ site.Data.icons.desktop | safeHTMLAttr }} : <br>
                        {{- range $index, $element := .dskp }}
                          {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                        {{- end }} <hr>
                      {{- else if .smptb -}}
                        {{ site.Data.icons.mobile | safeHTMLAttr }} / {{ site.Data.icons.tab | safeHTMLAttr }} : <br>
                        {{- range $index, $element := .smptb }}
                          {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                        {{- end }} <hr>
                      {{- else if .else -}}
                        {{ site.Data.icons.bars | safeHTMLAttr }} : <br>
                        {{- range $index, $element := .else }}
                          {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                        {{- end }} <hr>
                      {{- end }}
                    {{- end -}}
                  "><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
                {{- end -}}
                <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="Which platforms, is the software available on. Orange borders mean unofficial release."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
              </span>
            </div>
          </div>
          <p class="card-text mt-3">
            {{- if .Params.platform }}
              {{- range .Params.platform }}
                {{- if .dskp -}}
                  <a role="button" class="btn" tabindex="0" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="Desktop" data-content="
                    {{- range .dskp -}}
                      {{ if eq .name "Linux" }}
                        {{- if eq .type "official" -}}
                          <span class='fa-2x'>{{ site.Data.icons.linux | safeHTMLAttr }}</span>&nbsp;&nbsp;
                        {{- else -}}
                          <span class='fa-2x border border-warning p-1'>{{ site.Data.icons.linux | safeHTMLAttr }}</span>&nbsp;&nbsp;
                        {{- end }}
                      {{- else if eq .name "Windows" }}
                        {{- if eq .type "official" -}}
                          <span class='fa-2x'>{{ site.Data.icons.windows | safeHTMLAttr }}</span>&nbsp;&nbsp;
                        {{- else -}}
                          <span class='fa-2x border border-warning p-1'>{{ site.Data.icons.windows | safeHTMLAttr }}</span>&nbsp;&nbsp;
                        {{- end }}
                      {{- else if eq .name "macOS" }}
                        {{- if eq .type "official" -}}
                          <span class='fa-2x'>{{ site.Data.icons.apple | safeHTMLAttr }}</span>&nbsp;&nbsp;
                        {{- else }}
                          <span class='fa-2x border border-warning p-1'>{{ site.Data.icons.apple | safeHTMLAttr }}</span>&nbsp;&nbsp;
                        {{- end }}
                      {{- else }}
                        {{- if eq .type "official" -}}
                          <span class='shadow-sm p-2' style='margin-top:-1rem;'>{{ .name }}</span>&nbsp;&nbsp;
                        {{- else -}}
                          <span class='border border-warning shadow-sm p-2' style='margin-top:-1rem;'>{{ .name }}</span>&nbsp;&nbsp;
                        {{- end }}
                      {{- end }}
                    {{- end -}}
                  "><span class="text-clr2">{{ site.Data.icons.desktop | safeHTML }}</span></a>
                {{- else if .smp -}} 
                  <a role="button" class="btn" tabindex="0" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="Smartphone" data-content="
                    {{- range .smp -}}
                      {{ if eq .name "Android" }}
                        {{- if eq .type "official" -}}
                          <span class='fa-2x'>{{ site.Data.icons.android | safeHTMLAttr }}</span>&nbsp;&nbsp;
                        {{- else -}}
                          <span class='fa-2x border border-warning p-1'>{{ site.Data.icons.android | safeHTMLAttr }}</span>&nbsp;&nbsp;
                        {{- end }}
                      {{- else if eq .name "iOS" }}
                        {{- if eq .type "official" -}}
                          <span class='fa-2x'>{{ site.Data.icons.apple | safeHTMLAttr }}</span>&nbsp;&nbsp;
                        {{- else -}}
                          <span class='fa-2x border border-warning p-1'>{{ site.Data.icons.apple | safeHTMLAttr }}</span>&nbsp;&nbsp;
                        {{- end }}
                      {{- else }}
                        {{- if eq .type "official" -}}
                          <span class='shadow-sm p-2' style='margin-top:-1rem;'>{{ .name }}</span>&nbsp;&nbsp;
                        {{- else -}}
                          <span class='border border-warning shadow-sm p-2' style='margin-top:-1rem;'>{{ .name }}</span>&nbsp;&nbsp;
                        {{- end }}
                      {{- end }}
                    {{- end -}}
                  "><span class="text-clr2">{{ site.Data.icons.mobile | safeHTML }}</span></a>
                {{- else if .tab -}} 
                  <a role="button" class="btn" tabindex="0" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="Tablet" data-content="
                    {{- range .tab -}}
                      {{ if eq .name "Android" }}
                        {{- if eq .type "official" }}
                        <span class='fa-2x'>{{ site.Data.icons.android | safeHTMLAttr }}</span>&nbsp;&nbsp;
                        {{- else -}}
                          <span class='fa-2x border border-warning p-1'>{{ site.Data.icons.android | safeHTMLAttr }}</span>&nbsp;&nbsp;
                        {{- end }}
                      {{- else if eq .name "iOS" }}
                        {{- if eq .type "official" -}}
                          <span class='fa-2x'>{{ site.Data.icons.apple | safeHTMLAttr }}</span>&nbsp;&nbsp;
                        {{- else -}}
                          <span class='fa-2x border border-warning p-1'>{{ site.Data.icons.apple | safeHTMLAttr }}</span>&nbsp;&nbsp;
                        {{- end }}
                      {{- else }}
                        {{- if eq .type "official" -}}
                          <span class='shadow-sm p-2' style='margin-top:-1rem;'>{{ .name }}</span>&nbsp;&nbsp;
                        {{- else -}}
                          <span class='border border-warning shadow-sm p-2' style='margin-top:-1rem;'>{{ .name }}</span>&nbsp;&nbsp;
                        {{- end }}
                      {{- end }}
                    {{- end -}}
                  "><span class="text-clr2">{{ site.Data.icons.tab | safeHTML }}</span></a>
                {{- else -}} 
                  <a role="button" class="btn" tabindex="0" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="Else" data-content="
                    {{- range .else -}}
                      {{ if eq .type "official" -}}
                        <span class='badge badge-light' title='This software framework/application would possibly run on every platform that can run {{ .name }}' style='margin-top:-1rem;'>{{ .name }}</span>&nbsp;&nbsp;
                      {{- else -}}
                        <span class='border border-warning badge badge-light' title='This software framework/application would possibly run on every platform that can run {{ .name }}' style='margin-top:-1rem;'>{{ .name }}</span>&nbsp;&nbsp;
                      {{- end }}
                    {{- end -}}
                  "><span class="text-clr2">{{ site.Data.icons.bars | safeHTML }}</span></a>
                {{- end }}&nbsp;
              {{- end }}
            {{- else -}}
              {{ $no_content | safeHTML }}
            {{- end -}}
          </p>
        </div>
      </div>
      <!-- #16 Social -->
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <span class="anchor" id="social"></span>
              <h2 class="card-title h4 m-0">Social</h2>
            </div>
            <div class="col-auto">
              <span class="float-right">
                <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="Social presence across the internet."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
              </span>
            </div>
          </div>
          <p class="card-text mt-3">
            {{- if .Params.social }}
              <!-- We will be using .Scratch here, as there is involved rewriting of variables multiple times -->
              <!-- Initialize a variable as Scratch -->
              {{- $scratch := newScratch }}
              <!-- Range through all elements from the social param and assign (Set) respective value to $scratch -->
              {{- range $index, $element := .Params.social }}
                {{- if eq $element.name "Wikipedia" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.wikipedia ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Youtube" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.youtube ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Facebook" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.facebook ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Twitter" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.twitter ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Pinterest" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.pinterest ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Instagram" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.instagram ) `</span></a>`) "") -}}
                {{- else if eq $element.name "LinkedIn" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.linkedin ) `</span></a>`) "") -}}
                {{- else if eq $element.name "VK" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.vk ) `</span></a>`) "") -}}
                {{- else if eq $element.name "DeviantArt" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.deviantart ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Google+" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.googlePlus ) `</span></a>`) "") -}}
                {{- else if eq $element.name "reddit" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.reddit ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Flickr" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.flickr ) `</span></a>`) "") -}}
                {{- else if eq $element.name "mastodon" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.mastodon ) `</span></a>`) "") -}}
                {{- else if eq $element.name "GitHub" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.github ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Steam" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.steam ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Bandcamp" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.bandcamp ) `</span></a>`) "") -}}
                {{- else if eq $element.name "Medium" -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a href="` $element.url `"><span class="fa-2x">` ( safeHTML site.Data.icons.medium ) `</span></a>`) "") -}}
                {{- else -}}
                  {{- $scratch.Set "social_item" (delimit (slice `<a class="border p-1" href="` $element.url `"><span>` $element.name `</span></a>`) "") -}}
                {{- end -}}
                <!-- Get the value stored in $scratch -->
                {{- if $index }}&nbsp; {{ end }}{{ $scratch.Get "social_item" }}
              {{- end -}} <!-- end range -->
            {{- else -}}
              {{ $no_content | safeHTML }}
            {{- end -}}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container-fluid bg-antinav-light py-3">
  <div class="row">
    <div class="col-md-8">
      <!-- #8 System Requirements -->
      <div class="card mb-3">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <span class="anchor" id="sysreq"></span>
              <h2 class="card-title h4 m-0">System Requirements</h2>
            </div>
            <div class="col-auto">
              <span class="float-right">
                {{- if .Params.source.sysreq -}}
                  <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-html="true" data-original-title="Source(s)" data-content="
                    {{- range $index, $element := .Params.source.sysreq -}}
                      {{ add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                    {{- end -}}
                  "><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
                {{- end -}}
                <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="System configuration you should have to run the software peacefully."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
              </span>
            </div>
          </div>
          <div class="card-text mt-3">
            {{- if (or (or $minimum $recommended) $optimal) -}}
              <div class="table-responsive-md">
                <table>
                  <thead>
                    <tr>
                      <th scope="col">#</th>
                      {{- if $minimum -}}
                        <th scope="col">Minimum</th>
                      {{- end }}
                      {{- if $recommended -}}
                        <th scope="col">Recommended</th>
                      {{- end }}
                      {{- if $optimal -}}
                        <th scope="col">Optimal</th>
                      {{- end -}}
                    </tr>
                  </thead>
                  <tbody>
                    {{- range $index, $element := .Params.sysreq -}}
                      <tr>
                        <th scope="row">{{ add $index 1 }}</th>
                        {{- if $minimum -}}
                          <td>
                            {{- if $element.min }}
                              {{- $element.min }}
                            {{- end -}}
                          </td>
                        {{- end }}
                        {{- if $recommended -}}
                          <td>
                            {{- if $element.recm }}
                              {{- $element.recm -}}
                            {{- end -}}
                          </td>
                        {{- end }}
                        {{- if $optimal -}}
                          <td>
                            {{- if $element.optm }}
                              {{- $element.optm }}
                            {{- end -}}
                          </td>
                        {{- end -}}
                      </tr>
                    {{- end -}}
                  </tbody>
                </table>
              </div>
              <!-- /table-responsive -->
            {{- else -}}
              {{ $no_content | safeHTML }}
            {{- end -}}
          </div>
          <!-- /card-text -->
        </div>
        <!-- /card-body -->
      </div>
      <!-- /card -->
    </div>
    <!-- /col-md-8 -->
    <div class="col-md-4">
      <!-- #18 Rating -->
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <span class="anchor" id="rating"></span>
              <h2 class="card-title h4 m-0">Ratings</h2>
            </div>
            <div class="col-auto">
              <span class="float-right">
                <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="An overview of various reviews and ratings by different reviewers."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
              </span>
            </div>
          </div>
          <div class="card-text mt-3">
            {{- if .Params.rating }}
              <div class="text-center align-middle mb-3">
                <span class="font-weight-bold h5">{{ lang.NumFmt 2 (mul $rating_stars 5) }}</span><!-- lang.NumFmt formats a number with a given precision -->
                <div class="d-inline-block rating-stars">
                  <div class="rating-stars-top" style="width: {{ math.Round (mul $rating_stars 100) }}%"><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span></div>
                  <div class="rating-stars-bottom"><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span></div>
                </div>
                <span class="h5">5</span>
              </div>
              
              {{- range $index, $rt := .Params.rating -}}
                <!-- in case it isn't last forloop, break line after each rating -->
                {{- if $index }}<br>{{ end -}}
                <div>
                  <span>{{- $rt.name }}:</span> <span>{{ index $rt.rate 0 }}</span>
                  <div class="d-inline-block rating-stars">
                    <div class="rating-stars-top" style="width: {{ mul (div (mul (index $rt.rate 0) 1.0) (index $rt.rate 1)) 100 }}%"><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span></div>
                    <div class="rating-stars-bottom"><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span><span>&#9733;</span></div>
                  </div>
                  <span> {{ index $rt.rate 1 }}</span>
                  {{- if $rt.num }} &nbsp;<span class="text-muted">based on {{ $rt.num }} reviews</span>{{ else }} &nbsp;<span class="text-muted">based on professional's opinion</span>{{ end }}
                  <span class="float-right">
                    {{- range $index_src, $rt_src := $.Params.source.rating -}}
                      <!-- check whether 0th element of array which is name of reviewer is same as the concerned rating's reviewer -->
                      {{- if eq $rt_src.name $rt.name -}}
                        <!-- whether the review is based on a number of user opinions --> 
                        {{- if $rt.num -}}
                          <!-- check whether the array of 'src_rating' has 2nd element "user", which corresponds to "based on a number of users' opinion" -->
                          {{- if eq $rt_src.type "user" -}}
                            <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-html="true" data-original-title="Source(s)" data-content="<a href='{{ $rt_src.url }}'>{{ $rt_src.url }}</a>"><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
                          {{- end -}}
                        {{- else }}
                          <!-- in case rating is based on a professsional's opinion -->
                          {{- if eq $rt_src.type "expert" -}}
                            <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-html="true" data-original-title="Source(s)" data-content="<a href='{{ $rt_src.url }}'>{{ $rt_src.url }}</a>"><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
                          {{- end }}
                        {{- end }}
                      {{- end }}
                    {{- end -}}
                  </span>
                </div>
              {{- end }}
            {{- else -}}
              {{ $no_content | safeHTML }}
            {{- end -}}
          </div>
        </div>
      </div>
    </div>
    <!-- /col-md-4 -->
  </div>
  <!-- /row -->
</div>
<div class="container-fluid bg-antinav-light pb-3">
  <div class="card-deck mb-3">
    <!-- #9 Developer -->
    <div class="card">
      <div class="card-body">
        <div class="row">
          <div class="col">
            <span class="anchor" id="developer"></span>
            <h2 class="card-title h4 m-0">Developer</h2>
          </div>
          <div class="col-auto">
            <span class="float-right">
              {{- if .Params.source.developer -}}
                <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-html="true" data-original-title="Source(s)" data-content="
                  {{- range $index, $element := .Params.source.developer }}
                    {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                  {{- end -}}
                "><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
              {{- end -}}
              <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="Get to know who developed the software."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
            </span>
          </div>
        </div>
        <p class="card-text mt-3">
          {{- if .Params.developer }}
            {{- range $index, $element := .Params.developer }}
              {{- if $index }}, {{ end }}{{ replace (replace $element `<OD>` `<abbr title="Original Developer">(OD)</abbr>`) `<BDFL>` `<abbr title="Benevolent Dictator For Life">(BDFL)</abbr>` | safeHTML }}
            {{- end }}
          {{- else -}}
            {{ $no_content | safeHTML }}
          {{- end -}}
        </p>
      </div>
    </div>
    <!-- #12 Written In -->
    <div class="card">
      <div class="card-body">
        <div class="row">
          <div class="col">
            <span class="anchor" id="written_in"></span>
            <h2 class="card-title h4 m-0">Written in</h2>
          </div>
          <div class="col-auto">
            <span class="float-right">
              {{- if .Params.source.written_in -}}
                <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-html="true" data-original-title="Source(s)" data-content="
                  {{- range $index, $element := .Params.source.written_in }}
                    {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                  {{- end -}}
                "><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
              {{- end -}}
              <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="Computer language(s), in which the software is written."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
            </span>
          </div>
        </div>
        <p class="card-text mt-3">
          {{- if .Params.written_in }}
            {{- range $index, $element := .Params.written_in }}
              {{- if $index }}, {{ end }}{{ $element }}
            {{- end }}
          {{- else -}}
            {{ $no_content | safeHTML }}
          {{- end -}}
        </p>
      </div>
    </div>
    <!-- #10 Initial Release -->
    <div class="card">
      <div class="card-body">
        <div class="row">
          <div class="col">
          <span class="anchor" id="initial_release"></span>
          <h2 class="card-title h4 m-0">Initial Release</h2>
          </div>
          <div class="col-auto">
            <span class="float-right">
              {{- if .Params.source.initial_release -}}
                <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-html="true" data-original-title="Source(s)" data-content="
                  {{- range $index, $element := .Params.source.initial_release }}
                    {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                  {{- end -}}
                "><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
              {{- end -}}
              <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="When was the software initially released. Elder the software, more trustworthy it is."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
            </span>
          </div>
        </div>
        <p class="card-text mt-3">
          {{- if .Params.initial_release }}
            {{- range $index, $element := .Params.initial_release }}
              {{- if $index }}, {{ end }}{{ $element }}
            {{- end }}
          {{- else -}}
            {{ $no_content | safeHTML }}
          {{- end -}}
        </p>
      </div>
    </div>
  </div>
  <div class="card-deck mb-3">
    <!-- #11 Repository -->
    <div class="card">
      <div class="card-body">
        <div class="row">
          <div class="col">
            <span class="anchor" id="repository"></span>
            <h2 class="card-title h4 m-0">Repository</h2>
          </div>
          <div class="col-auto">
            <span class="float-right">
              <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="Here you can find source code of the software. Have a look!"><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
            </span>
          </div>
        </div>
        <p class="card-text mt-3">
          {{- if .Params.repository }}
            {{- range $index, $element := .Params.repository }}
              {{- if $index }}, {{ end }}<a href="{{ $element }}">{{ $element }}</a>
            {{- end }}
          {{- else -}}
            {{ $no_content | safeHTML }}
          {{- end -}}
        </p>
      </div>
    </div>
    <!-- #15 License -->
    <div class="card">
      <div class="card-body">
        <div class="row">
          <div class="col">
            <span class="anchor" id="license"></span>
            <h2 class="card-title h4 m-0">License</h2>
          </div>
          <div class="col-auto">
            <span class="float-right">
              {{- if .Params.source.license -}}
                <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-html="true" data-original-title="Source(s)" data-content="
                  {{- range $index, $element := .Params.source.license }}
                    {{- add $index 1 }} {{ if reflect.IsSlice $element }}<a href='{{ index $element 0 }}'>{{ index $element 1 }}</a>{{ else }}<a href='{{ $element }}'>{{ $element }}</a>{{ end }}<br>
                  {{- end -}}
                "><span class="small">{{ site.Data.icons.source | safeHTML }}</span></a>
              {{- end -}}
              <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-trigger="focus" data-html="true" data-original-title="What is this card" data-content="License helps you to know the terms by which use of software is allowed. To quickly get a grasp, refer <a href='https://tldrlegal.com/'>tl;drLegal</a>."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
            </span>
          </div>
        </div>
        <p class="card-text mt-3">
          {{- if .Params.license }}
            {{- range $index, $element := .Params.license }}
              {{- if $index }}, {{ end }}<span{{ if in $element "(m)" }} title="{{ $element }} modified"{{ end }}>{{ $element }}</span>
            {{- end }}
          {{- else -}}
            {{ $no_content | safeHTML }}
          {{- end -}}
        </p>
      </div>
    </div>
    <!-- #14 Categories -->
    <div class="card">
      <div class="card-body">
        <div class="row">
          <div class="col">
            <span class="anchor" id="categories"></span>
            <h2 class="card-title h4 m-0">Categories</h2>
          </div>
          <div class="col-auto">
            <span class="float-right">
              <a role="button" class="btn btn-sm" tabindex="0" data-toggle="popover" data-trigger="focus" data-original-title="What is this card" data-content="What type of software it is. Helps you with classification."><span class="small">{{ site.Data.icons.info | safeHTML }}</span></a>
            </span>
          </div>
        </div>
        <p class="card-text mt-3">
          {{- if .Params.categories }}
            {{- range $i, $e := .Params.categories }}
              {{- if $i }},  {{ end }}<a href="/categories/{{ lower (replace $e " " "-") }}">{{ $e }}</a>
            {{- end -}}
          {{- else -}}
            {{ $no_content | safeHTML }}
          {{- end -}}
        </p>
      </div>
    </div>
  </div>
  <!-- You may try -->
  <div class="card">
    <div class="card-body">
      <h2 class="card-title h4 m-0">You may try</h2>
      <!-- We won't be showing softwares that are covered under "Framework" category -->
      <p class="card-text mt-3">
        {{- range $category := .Params.categories }}
          {{- if ne $category "Framework" -}}
            <span class="h6">{{ $category }}</span><br>
            {{- range where site.RegularPages "Section" "==" "software" }}
              {{- if in .Params.categories $category -}}
                <a class="btn btn-sm btn-light shadow-sm my-2" href="{{ .Permalink }}">{{ .Params.title }}</a> &nbsp;
              {{- end }}
            {{- end -}}
            <br><br>
          {{- end }}
        {{- end -}}
      </p>
    </div>
  </div>
  {{- if .Params.note -}}
    <hr>
    <!-- Notes -->
    <div class="card">
      <div class="card-body">
        <h2 class="card-title h4 m-0">Notes</h2>
        <div class="card-text mt-3">
          {{ .Params.note | markdownify }}
        </div>
      </div>
    </div>
  {{- end -}}
  <br>
  {{/* .GitInfo seems to be not working on GitLab runners
  <p class="bg-nav text-antinav text-center small p-2">{{ .Title }} was last updated with commit: <a href="https://gitlab.com/{{ site.Title }}/softorage.gitlab.io/commit/{{ .GitInfo.Hash }}">{{ .GitInfo.Subject }} ({{ .GitInfo.AbbreviatedHash }})<a></p>
  */}}
</div>

{{- end }}
